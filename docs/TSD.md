# Technical Specification Document (TSD)

## Invenio - System Discovery & Inventory Tool

**Document Version:** 1.0
**Last Updated:** 2026-01-15
**Status:** Approved
**Author:** Layer Migration Platform Team

---

## Table of Contents

1. [Introduction](#1-introduction)
2. [System Architecture](#2-system-architecture)
3. [Technical Requirements](#3-technical-requirements)
4. [Component Specifications](#4-component-specifications)
5. [Data Structures](#5-data-structures)
6. [Platform-Specific Implementations](#6-platform-specific-implementations)
7. [Cloud Integration Specifications](#7-cloud-integration-specifications)
8. [Output Format Specification](#8-output-format-specification)
9. [Error Handling Strategy](#9-error-handling-strategy)
10. [Performance Specifications](#10-performance-specifications)
11. [Security Considerations](#11-security-considerations)
12. [Build & Deployment](#12-build--deployment)
13. [Testing Strategy](#13-testing-strategy)
14. [Future Technical Considerations](#14-future-technical-considerations)

---

## 1. Introduction

### 1.1 Purpose

This Technical Specification Document (TSD) provides comprehensive technical details for the Invenio system discovery tool. It serves as the authoritative reference for developers, architects, and operations teams working with or extending the Invenio platform.

### 1.2 Scope

This document covers:
- System architecture and design decisions
- Implementation specifications for each supported platform
- Data structures and output formats
- Build, deployment, and containerization details
- Performance benchmarks and requirements
- Security considerations and privilege requirements

### 1.3 Definitions

| Term | Definition |
|------|------------|
| **Discovery** | The process of gathering hardware and software inventory information |
| **Report** | The Markdown output file generated by Invenio |
| **Platform** | An operating system or cloud environment supported by Invenio |
| **CLI Tool** | Command-line interface tool used to gather system information |
| **cfg! Macro** | Rust compile-time conditional compilation macro |

### 1.4 References

- [Rust Programming Language](https://www.rust-lang.org/)
- [Layer Migration Platform Architecture](https://layer.io/docs)
- [GitHub Repository](https://github.com/michaelcolletti/Invenio)

---

## 2. System Architecture

### 2.1 High-Level Architecture

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              INVENIO RUNTIME                                  │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                               │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         ENTRY POINT: main()                              │ │
│  │   - Initialize runtime environment                                       │ │
│  │   - Invoke OS detection                                                  │ │
│  │   - Dispatch to appropriate discovery module                             │ │
│  │   - Write output to file                                                 │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                          │
│                                    ▼                                          │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                     OS DETECTION: get_os_type()                          │ │
│  │   - Compile-time detection using cfg! macros                             │ │
│  │   - Returns: windows | linux | macos | unix | aix | unknown              │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                    │                                          │
│           ┌────────────────────────┼────────────────────────┐                │
│           │                        │                        │                │
│           ▼                        ▼                        ▼                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐              │
│  │ On-Premises     │  │ Cloud Platform  │  │ Utility         │              │
│  │ Discovery       │  │ Discovery       │  │ Functions       │              │
│  │ ─────────────── │  │ ─────────────── │  │ ─────────────── │              │
│  │ discover_linux  │  │ discover_aws    │  │ check_command   │              │
│  │ discover_windows│  │ discover_gcp    │  │ _availability   │              │
│  │ discover_macos  │  │ discover_oci    │  │                 │              │
│  │ discover_unix   │  │                 │  │                 │              │
│  │ discover_aix    │  │                 │  │                 │              │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘              │
│                                    │                                          │
│                                    ▼                                          │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                       OUTPUT: invenio.md                                 │ │
│  │   - Structured Markdown format                                           │ │
│  │   - HTML <details> tags for collapsible sections                        │ │
│  │   - UTF-8 encoded text                                                   │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                               │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 2.2 Component Diagram

```
┌────────────────────────────────────────────────────────────────────────────┐
│                           INVENIO BINARY                                    │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌───────────────────┐     ┌───────────────────┐     ┌───────────────────┐│
│   │   std::process    │     │    std::fs        │     │   std::io         ││
│   │   ::Command       │     │    ::File         │     │   ::Write         ││
│   │                   │     │                   │     │                   ││
│   │ Execute system    │     │ Create output     │     │ Write report      ││
│   │ commands          │     │ file              │     │ contents          ││
│   └───────────────────┘     └───────────────────┘     └───────────────────┘│
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                        EXTERNAL CRATES                               │  │
│   │                                                                      │  │
│   │   rusoto_*        serde/serde_json        walkdir        sysinfo    │  │
│   │   (AWS SDK)       (Serialization)         (Dir Walk)     (Sys Info) │  │
│   │                                                                      │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     ▼
┌────────────────────────────────────────────────────────────────────────────┐
│                         OPERATING SYSTEM LAYER                              │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   System Commands          Shell/PowerShell           File System           │
│   ─────────────           ────────────────           ───────────            │
│   lscpu, free, df         powershell.exe             /etc/os-release       │
│   system_profiler         bash/sh                    /proc/cpuinfo         │
│   diskutil, pmset         cmd.exe                    invenio.md            │
│                                                                             │
└────────────────────────────────────────────────────────────────────────────┘
```

### 2.3 Data Flow

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Start     │────▶│  Detect OS  │────▶│  Execute    │────▶│  Aggregate  │
│   Process   │     │  Type       │     │  Discovery  │     │  Results    │
└─────────────┘     └─────────────┘     │  Commands   │     └──────┬──────┘
                                        └─────────────┘            │
                                                                   ▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Exit      │◀────│   Write     │◀────│  Format as  │◀────│  Build      │
│   Process   │     │   File      │     │  Markdown   │     │  Report     │
└─────────────┘     └─────────────┘     └─────────────┘     └─────────────┘
```

### 2.4 Design Decisions

| Decision | Rationale |
|----------|-----------|
| **Single Binary Architecture** | Simplifies deployment; no runtime dependencies |
| **Compile-Time OS Detection** | Zero runtime overhead; eliminates detection logic at execution |
| **Command-Based Discovery** | Leverages existing OS tools; no need to parse binary formats |
| **Markdown Output** | Human-readable; renders in GitHub/GitLab; easy to process |
| **Collapsible Sections** | Manages report size while maintaining detail availability |
| **Graceful Degradation** | Continues execution even if individual commands fail |

---

## 3. Technical Requirements

### 3.1 Development Environment

| Requirement | Specification |
|-------------|---------------|
| **Rust Version** | 1.70.0 or later (2021 Edition) |
| **Cargo Version** | 1.70.0 or later |
| **Target Triple (Linux)** | x86_64-unknown-linux-gnu |
| **Target Triple (macOS)** | aarch64-apple-darwin, x86_64-apple-darwin |
| **Target Triple (Windows)** | x86_64-pc-windows-msvc |

### 3.2 Build Dependencies

```toml
[dependencies]
rusoto_core = "0.47"
rusoto_credential = "0.47"
rusoto_ec2 = "0.47"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
walkdir = "2.3"
sysinfo = "0.25"
```

### 3.3 Runtime Requirements

| Platform | Requirements |
|----------|--------------|
| **Linux** | glibc 2.17+, standard coreutils |
| **Windows** | Windows 10+, PowerShell 5.1+ |
| **macOS** | macOS 10.15+ (Catalina), Xcode CLI tools |
| **AIX** | AIX 7.1+, bos.rte.commands |

### 3.4 Cloud Platform Requirements

| Platform | CLI Tool | Version | Configuration |
|----------|----------|---------|---------------|
| **AWS** | aws-cli | 2.x | ~/.aws/credentials |
| **GCP** | gcloud | Latest | gcloud auth login |
| **OCI** | oci-cli | Latest | ~/.oci/config |

---

## 4. Component Specifications

### 4.1 Entry Point: `main()`

**Location:** `src/main.rs:640-673`

**Responsibilities:**
1. Invoke `get_os_type()` for platform detection
2. Initialize report string buffer
3. Dispatch to appropriate discovery function based on OS type
4. Write aggregated report to `invenio.md`

**Algorithm:**
```
FUNCTION main():
    os_type ← get_os_type()
    report ← empty string

    SWITCH os_type:
        CASE "windows":
            report ← "# Windows Systems\n" + discover_windows()
        CASE "linux":
            report ← "# Linux Systems\n" + discover_linux()
        CASE "macos":
            report ← "# macOS Systems\n" + discover_macos()
        CASE "unix":
            report ← "# Unix Systems\n" + discover_unix()
        CASE "aix":
            report ← "# AIX Systems\n" + discover_aix()
        DEFAULT:
            report ← "Unsupported OS\n"

    file ← create_file("invenio.md")
    write(file, report)
END FUNCTION
```

### 4.2 OS Detection: `get_os_type()`

**Location:** `src/main.rs:622-638`

**Mechanism:** Rust compile-time `cfg!` macros

**Supported Target OS Values:**
- `windows`
- `linux`
- `macos`
- `freebsd`, `openbsd`, `netbsd`, `solaris` → mapped to "unix"
- `aix`

**Return Values:**
| cfg! Target | Return Value |
|-------------|--------------|
| `target_os = "windows"` | `"windows"` |
| `target_os = "linux"` | `"linux"` |
| `target_os = "macos"` | `"macos"` |
| BSD variants | `"unix"` |
| `target_os = "aix"` | `"aix"` |
| Other | `"unknown"` |

### 4.3 Command Availability Check: `check_command_availability()`

**Location:** `src/main.rs:577-583`

**Purpose:** Verify CLI tool availability before execution

**Implementation:**
```rust
fn check_command_availability(command: &str) -> bool {
    Command::new("which")
        .arg(command)
        .output()
        .map(|output| output.status.success())
        .unwrap_or(false)
}
```

**Behavior:**
- Returns `true` if command exists in PATH
- Returns `false` if command not found or `which` fails
- Used primarily for cloud CLI tools (aws, gcloud, oci)

---

## 5. Data Structures

### 5.1 Report String

**Type:** `String`

**Growth Pattern:** Append-only during discovery

**Memory Allocation:**
- Initial capacity: Default (0 bytes)
- Growth: Exponential doubling
- Typical final size: 50KB - 500KB depending on system complexity

### 5.2 Command Output

**Type:** `std::process::Output`

**Structure:**
```rust
pub struct Output {
    pub status: ExitStatus,      // Command exit code
    pub stdout: Vec<u8>,         // Standard output bytes
    pub stderr: Vec<u8>,         // Standard error bytes
}
```

### 5.3 File Handle

**Type:** `std::fs::File`

**Operations:**
- `File::create()` - Create or truncate file
- `file.write_all()` - Write complete buffer

---

## 6. Platform-Specific Implementations

### 6.1 Linux Discovery

**Function:** `discover_linux()`
**Location:** `src/main.rs:30-80`

**Commands Executed:**

| Category | Command | Arguments | Purpose |
|----------|---------|-----------|---------|
| CPU | `lscpu` | None | CPU architecture information |
| Memory | `free` | `-h` | Human-readable memory stats |
| Storage | `lsblk` | None | Block device listing |
| Filesystem | `df` | `-h` | Disk space usage |
| Network | `ip` | `addr` | Network interface configuration |
| OS Info | `cat` | `/etc/os-release` | Distribution information |

**Output Sections:**
1. CPU Information
2. Memory Information
3. Storage Information
4. Filesystem Information
5. Network Interfaces
6. OS Information

### 6.2 Windows Discovery

**Function:** `discover_windows()`
**Location:** `src/main.rs:82-140`

**Commands Executed:**

| Category | PowerShell Command | WMI Class |
|----------|--------------------|-----------|
| CPU | `Get-WmiObject` | `Win32_Processor` |
| Memory | `Get-WmiObject` | `Win32_PhysicalMemory` |
| Storage | `Get-WmiObject` | `Win32_DiskDrive` |
| Filesystem | `Get-WmiObject` | `Win32_LogicalDisk` |
| Network | `Get-NetAdapter` | N/A |
| OS Info | `Get-ComputerInfo` | N/A |

**Execution Method:**
```rust
Command::new("powershell")
    .arg("-Command")
    .arg("<PowerShell command>")
    .output()
```

### 6.3 macOS Discovery

**Function:** `discover_macos()`
**Location:** `src/main.rs:263-575`

**Primary Tools:**
- `system_profiler` - Comprehensive hardware information
- `sysctl` - Kernel and hardware parameters
- `diskutil` - Disk management utility
- `pmset` - Power management settings
- `ioreg` - I/O Registry access
- `ifconfig` / `netstat` - Network configuration

**Discovery Sections (28 total):**

| Category | Tool | Data Type |
|----------|------|-----------|
| Hardware Overview | `system_profiler SPHardwareDataType` | Expanded |
| CPU Details | `sysctl machdep.cpu.*` | Expanded |
| Memory | `system_profiler SPMemoryDataType` | Expanded |
| Storage | `system_profiler SPStorageDataType` | Expanded |
| NVMe | `system_profiler SPNVMeDataType` | Expanded |
| Disk Layout | `diskutil list` | Expanded |
| SATA | `system_profiler SPSerialATADataType` | Expanded |
| Network | `system_profiler SPNetworkDataType` | Collapsed |
| Ethernet | `system_profiler SPEthernetDataType` | Collapsed |
| WiFi | `system_profiler SPAirPortDataType` | Collapsed |
| Bluetooth | `system_profiler SPBluetoothDataType` | Collapsed |
| Interfaces | `ifconfig` | Collapsed |
| Routing | `netstat -nr` | Collapsed |
| Protocol Stats | `netstat -s` | Collapsed |
| Graphics | `system_profiler SPDisplaysDataType` | Collapsed |
| Power | `system_profiler SPPowerDataType` | Collapsed |
| Power Settings | `pmset -g` | Collapsed |
| Battery | `pmset -g batt` | Collapsed |
| Thermal | `sudo powermetrics` | Collapsed |
| USB | `system_profiler SPUSBDataType` | Collapsed |
| Thunderbolt | `system_profiler SPThunderboltDataType` | Collapsed |
| PCI | `system_profiler SPPCIDataType` | Collapsed |
| Audio | `system_profiler SPAudioDataType` | Collapsed |
| Camera | `system_profiler SPCameraDataType` | Collapsed |
| OS Info | `system_profiler SPSoftwareDataType` | Collapsed |
| Kernel | `uname -a` | Collapsed |
| Uptime | `uptime` | Collapsed |
| I/O Registry | `ioreg` | Collapsed |

### 6.4 Unix/BSD Discovery

**Function:** `discover_unix()`
**Location:** `src/main.rs:142-192`

**Commands:** Same as Linux with fallback to `uname -a` for OS info

### 6.5 AIX Discovery

**Function:** `discover_aix()`
**Location:** `src/main.rs:194-261`

**AIX-Specific Commands:**

| Category | Command | Arguments |
|----------|---------|-----------|
| CPU | `lsattr` | `-El proc0` |
| Memory | `lsattr` | `-El sys0` |
| Storage | `lsvg` | None |
| Filesystem | `df` | `-k` |
| Network | `netstat` | `-in` |
| OS Version | `oslevel` | None |
| Volume Groups | `lsvg` | None |
| Logical Volumes | `lsvg` | `-o` |

---

## 7. Cloud Integration Specifications

### 7.1 AWS Discovery

**Function:** `discover_aws()`
**Location:** `src/main.rs:584-594`

**Prerequisites:**
- AWS CLI v2 installed
- Valid credentials in `~/.aws/credentials` or environment variables
- Appropriate IAM permissions (`ec2:DescribeInstances`)

**Command:**
```bash
aws ec2 describe-instances
```

**Output Format:** JSON (raw AWS API response)

### 7.2 GCP Discovery

**Function:** `discover_gcp()`
**Location:** `src/main.rs:596-607`

**Prerequisites:**
- gcloud CLI installed
- Authenticated via `gcloud auth login`
- Project selected via `gcloud config set project`

**Command:**
```bash
gcloud compute instances list
```

**Output Format:** Tabular (gcloud default)

### 7.3 OCI Discovery

**Function:** `discover_oci()`
**Location:** `src/main.rs:609-620`

**Prerequisites:**
- OCI CLI installed
- Configuration in `~/.oci/config`
- Valid API key registered

**Command:**
```bash
oci compute instance list
```

**Output Format:** JSON (OCI API response)

---

## 8. Output Format Specification

### 8.1 File Specification

| Property | Value |
|----------|-------|
| **Filename** | `invenio.md` |
| **Location** | Current working directory |
| **Encoding** | UTF-8 |
| **Line Endings** | Platform-native (LF on Unix, CRLF on Windows) |

### 8.2 Markdown Structure

```markdown
# {OS Type} Systems

<details open>
<summary>

### {Section Name}

</summary>

{Command output}

</details>

<details>
<summary>

### {Section Name}

</summary>

{Command output}

</details>
```

### 8.3 Section Visibility Rules

| Section Type | HTML Attribute | Visibility |
|--------------|----------------|------------|
| Hardware Overview | `<details open>` | Expanded |
| CPU Information | `<details open>` | Expanded |
| Memory Information | `<details open>` | Expanded |
| Storage Information | `<details open>` | Expanded |
| Network Information | `<details>` | Collapsed |
| Peripheral Devices | `<details>` | Collapsed |
| Power/Battery | `<details>` | Collapsed |
| OS/Kernel Details | `<details>` | Collapsed |

### 8.4 HTML Tag Syntax

**Expanded Section:**
```html
<details open>
<summary>

### Section Title

</summary>

Content here...

</details>
```

**Collapsed Section:**
```html
<details>
<summary>

### Section Title

</summary>

Content here...

</details>
```

---

## 9. Error Handling Strategy

### 9.1 Command Execution Errors

**Default Behavior:** Panic with descriptive message

```rust
let output = Command::new("command")
    .output()
    .expect("Failed to execute command");
```

**Graceful Handling (Optional Commands):**
```rust
let output = Command::new("command").output();
if let Ok(output) = output {
    if output.status.success() {
        report.push_str(&String::from_utf8_lossy(&output.stdout));
    } else {
        report.push_str("Command failed\n");
    }
} else {
    report.push_str("Command not available\n");
}
```

### 9.2 File I/O Errors

```rust
let mut file = File::create("invenio.md")
    .expect("Unable to create file");
file.write_all(report.as_bytes())
    .expect("Unable to write data");
```

### 9.3 Privilege Escalation Handling

For commands requiring root/administrator privileges:

```rust
let output = Command::new("sudo")
    .arg("-n")  // Non-interactive (fails if password required)
    .arg("privileged_command")
    .output();

match output {
    Ok(o) if o.status.success() => {
        // Use output
    }
    _ => {
        report.push_str("Requires elevated privileges\n");
    }
}
```

---

## 10. Performance Specifications

### 10.1 Benchmarks

| Metric | Target | Typical |
|--------|--------|---------|
| **Startup Time** | < 50ms | ~20ms |
| **Discovery Time (Linux)** | < 5s | ~2s |
| **Discovery Time (macOS)** | < 30s | ~15s |
| **Discovery Time (Windows)** | < 10s | ~5s |
| **Memory Usage** | < 50MB | ~10MB |
| **Binary Size (release)** | < 10MB | ~5MB |

### 10.2 Performance Considerations

1. **Command Execution:** Sequential (not parallelized)
2. **String Allocation:** Single growing buffer
3. **File Write:** Single atomic write at end
4. **Network I/O:** None (local discovery only)

### 10.3 Optimization Opportunities

| Opportunity | Impact | Complexity |
|-------------|--------|------------|
| Parallel command execution | 40-60% faster | Medium |
| Pre-allocated string buffer | Minor | Low |
| Async I/O | Minimal | High |
| Command caching | None (single run) | N/A |

---

## 11. Security Considerations

### 11.1 Privilege Requirements

| Platform | Standard Discovery | Full Discovery |
|----------|-------------------|----------------|
| Linux | User | User |
| Windows | User | Administrator (some WMI) |
| macOS | User | Root (thermal sensors) |
| AIX | User | User |

### 11.2 Data Sensitivity

**Potentially Sensitive Information Collected:**
- MAC addresses
- IP addresses
- Serial numbers
- Volume UUIDs
- User account names

**Recommendations:**
- Store reports securely
- Redact before sharing publicly
- Consider encryption at rest

### 11.3 Command Injection Prevention

All command arguments are hardcoded:
- No user input processed
- No environment variable interpolation in commands
- No shell expansion (`Command::new` bypasses shell)

### 11.4 File System Security

- Output file created with default permissions
- No elevated privileges for file operations
- Overwrites existing file if present

---

## 12. Build & Deployment

### 12.1 Build Commands

```bash
# Debug build
cargo build

# Release build (optimized)
cargo build --release

# Cross-compilation (example: Linux target from macOS)
cargo build --release --target x86_64-unknown-linux-gnu
```

### 12.2 Build Artifacts

| Build Type | Location | Size (approx) |
|------------|----------|---------------|
| Debug | `target/debug/invenio` | ~20MB |
| Release | `target/release/invenio` | ~5MB |

### 12.3 Docker Build

**Dockerfile (Multi-stage):**

```dockerfile
FROM lukemathwalker/cargo-chef:latest AS chef
WORKDIR /app

FROM chef AS planner
COPY ./Cargo.toml ./Cargo.lock ./
COPY ./src ./src
RUN cargo chef prepare

FROM chef AS builder
COPY --from=planner /app/recipe.json .
RUN cargo chef cook --release
COPY . .
RUN cargo build --release
RUN mv ./target/release/invenio ./app

FROM debian:stable-slim AS runtime
WORKDIR /app
COPY --from=builder /app/app /usr/local/bin/
ENTRYPOINT ["/usr/local/bin/app"]
```

**Build Command:**
```bash
docker build -t invenio:latest .
```

### 12.4 Deployment Methods

| Method | Use Case | Command |
|--------|----------|---------|
| Direct Binary | Production servers | `./invenio` |
| Docker | Containerized environments | `docker run invenio` |
| Cargo Run | Development | `cargo run` |

---

## 13. Testing Strategy

### 13.1 Test Categories

| Category | Scope | Frequency |
|----------|-------|-----------|
| Unit Tests | Individual functions | Every commit |
| Integration Tests | Command execution | Every commit |
| Platform Tests | Full discovery on each OS | Release |
| Output Validation | Markdown structure | Release |

### 13.2 Test Commands

```bash
# Run all tests
cargo test

# Run with verbose output
cargo test --verbose

# Run specific test
cargo test test_name

# Run ignored tests
cargo test -- --ignored
```

### 13.3 CI/CD Pipeline

**GitHub Actions Workflow:**

```yaml
name: Rust

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

env:
  CARGO_TERM_COLOR: always

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Build
      run: cargo build --verbose
    - name: Run tests
      run: cargo test --verbose
```

### 13.4 Output Validation

```bash
# Verify balanced HTML tags
grep -c '<details' invenio.md
grep -c '</details>' invenio.md
# These counts must match

# Verify section headers
grep '###' invenio.md

# Verify no error messages
grep -i 'failed\|error' invenio.md
```

---

## 14. Future Technical Considerations

### 14.1 Planned Enhancements

| Feature | Technical Approach | Dependencies |
|---------|-------------------|--------------|
| JSON Output | serde_json serialization | None (existing) |
| SSH Discovery | libssh2 crate | `ssh2` crate |
| Kubernetes Discovery | k8s-openapi crate | `kube` crate |
| Azure Support | azure_sdk crate | `azure_sdk_*` crates |
| Configuration File | TOML/YAML parsing | `toml`/`serde_yaml` |

### 14.2 Scalability Considerations

**Current Limitations:**
- Single-threaded execution
- Local system only
- No state persistence

**Future Architecture:**
```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  Collector  │────▶│ Aggregator  │────▶│  Reporter   │
│   Agent     │     │   Service   │     │   Service   │
└─────────────┘     └─────────────┘     └─────────────┘
      │                   │                   │
      ▼                   ▼                   ▼
   Local FS            Database           Multiple
   Output              Storage            Formats
```

### 14.3 API Considerations

**Potential REST API Endpoints:**
- `POST /discover` - Trigger discovery
- `GET /report` - Retrieve latest report
- `GET /report/{id}` - Retrieve specific report
- `GET /systems` - List discovered systems

---

## Appendix A: Command Reference Quick Sheet

### Linux Commands
```bash
lscpu                          # CPU architecture
free -h                        # Memory usage
lsblk                          # Block devices
df -h                          # Disk space
ip addr                        # Network interfaces
cat /etc/os-release            # OS information
```

### macOS Commands
```bash
system_profiler SPHardwareDataType    # Hardware
system_profiler SPMemoryDataType      # Memory
system_profiler SPStorageDataType     # Storage
diskutil list                         # Disk layout
ifconfig                              # Network
pmset -g batt                         # Battery
```

### Windows Commands (PowerShell)
```powershell
Get-WmiObject Win32_Processor         # CPU
Get-WmiObject Win32_PhysicalMemory    # Memory
Get-WmiObject Win32_DiskDrive         # Disks
Get-WmiObject Win32_LogicalDisk       # Volumes
Get-NetAdapter                        # Network
Get-ComputerInfo                      # OS Info
```

### AIX Commands
```bash
lsattr -El proc0                # CPU
lsattr -El sys0                 # Memory
lsvg                            # Volume groups
df -k                           # Filesystems
netstat -in                     # Network
oslevel                         # OS version
```

---

## Appendix B: Glossary

| Term | Definition |
|------|------------|
| **cfg! macro** | Rust compile-time conditional compilation macro |
| **WMI** | Windows Management Instrumentation |
| **system_profiler** | macOS command-line tool for hardware information |
| **sysctl** | Unix/macOS kernel parameter utility |
| **LVM** | Logical Volume Manager |
| **NVMe** | Non-Volatile Memory Express |
| **SATA** | Serial Advanced Technology Attachment |

---

**Document Control:**
- Version: 1.0
- Classification: Internal
- Review Cycle: Quarterly
- Owner: Layer Migration Platform Team
